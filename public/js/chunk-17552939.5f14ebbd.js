(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17552939"],{"0a49":function(t,e,i){var s=i("9b43"),o=i("626a"),n=i("4bf8"),r=i("9def"),a=i("cd1c");t.exports=function(t,e){var i=1==t,c=2==t,l=3==t,u=4==t,d=6==t,b=5==t||d,f=e||a;return function(e,a,p){for(var m,v,h=n(e),g=o(h),y=s(a,p,3),j=r(g.length),C=0,_=i?f(e,j):c?f(e,0):void 0;j>C;C++)if((b||C in g)&&(m=g[C],v=y(m,C,h),t))if(i)_[C]=v;else if(v)switch(t){case 3:return!0;case 5:return m;case 6:return C;case 2:_.push(m)}else if(u)return!1;return d?-1:l||u?u:_}}},1169:function(t,e,i){var s=i("2d95");t.exports=Array.isArray||function(t){return"Array"==s(t)}},"144e":function(t,e,i){"use strict";var s=i("9371"),o=i.n(s);o.a},"1abd":function(t,e,i){},"1af6":function(t,e,i){var s=i("63b6");s(s.S,"Array",{isArray:i("9003")})},"20fd":function(t,e,i){"use strict";var s=i("d9f6"),o=i("aebd");t.exports=function(t,e,i){e in t?s.f(t,e,o(0,i)):t[e]=i}},"255d":function(t,e,i){"use strict";var s=i("7ed2"),o=i.n(s);o.a},"2cdd":function(t,e,i){},"2f21":function(t,e,i){"use strict";var s=i("79e5");t.exports=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})}},3702:function(t,e,i){var s=i("481b"),o=i("5168")("iterator"),n=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||n[o]===t)}},"3fc7":function(t,e,i){"use strict";var s=i("cfcd"),o=i.n(s);o.a},"40c3":function(t,e,i){var s=i("6b4c"),o=i("5168")("toStringTag"),n="Arguments"==s(function(){return arguments}()),r=function(t,e){try{return t[e]}catch(i){}};t.exports=function(t){var e,i,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=r(e=Object(t),o))?i:n?s(e):"Object"==(a=s(e))&&"function"==typeof e.callee?"Arguments":a}},"4ee1":function(t,e,i){var s=i("5168")("iterator"),o=!1;try{var n=[7][s]();n["return"]=function(){o=!0},Array.from(n,function(){throw 2})}catch(r){}t.exports=function(t,e){if(!e&&!o)return!1;var i=!1;try{var n=[7],a=n[s]();a.next=function(){return{done:i=!0}},n[s]=function(){return a},t(n)}catch(r){}return i}},"549b":function(t,e,i){"use strict";var s=i("d864"),o=i("63b6"),n=i("241e"),r=i("b0dc"),a=i("3702"),c=i("b447"),l=i("20fd"),u=i("7cd6");o(o.S+o.F*!i("4ee1")(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,o,d,b=n(t),f="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m,h=0,g=u(b);if(v&&(m=s(m,p>2?arguments[2]:void 0,2)),void 0==g||f==Array&&a(g))for(e=c(b.length),i=new f(e);e>h;h++)l(i,h,v?m(b[h],h):b[h]);else for(d=g.call(b),i=new f;!(o=d.next()).done;h++)l(i,h,v?r(d,m,[o.value,h],!0):o.value);return i.length=h,i}})},"54a1":function(t,e,i){i("6c1c"),i("1654"),t.exports=i("95d5")},"55dd":function(t,e,i){"use strict";var s=i("5ca1"),o=i("d8e8"),n=i("4bf8"),r=i("79e5"),a=[].sort,c=[1,2,3];s(s.P+s.F*(r(function(){c.sort(void 0)})||!r(function(){c.sort(null)})||!i("2f21")(a)),"Array",{sort:function(t){return void 0===t?a.call(n(this)):a.call(n(this),o(t))}})},6293:function(t,e,i){"use strict";var s=i("74a6"),o=i.n(s);o.a},"74a6":function(t,e,i){},7514:function(t,e,i){"use strict";var s=i("5ca1"),o=i("0a49")(5),n="find",r=!0;n in[]&&Array(1)[n](function(){r=!1}),s(s.P+s.F*r,"Array",{find:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")(n)},"774e":function(t,e,i){t.exports=i("d2d5")},"7cd6":function(t,e,i){var s=i("40c3"),o=i("5168")("iterator"),n=i("481b");t.exports=i("584a").getIteratorMethod=function(t){if(void 0!=t)return t[o]||t["@@iterator"]||n[s(t)]}},"7ed2":function(t,e,i){},9371:function(t,e,i){},"938a":function(t,e,i){"use strict";var s=i("1abd"),o=i.n(s);o.a},"95d5":function(t,e,i){var s=i("40c3"),o=i("5168")("iterator"),n=i("481b");t.exports=i("584a").isIterable=function(t){var e=Object(t);return void 0!==e[o]||"@@iterator"in e||n.hasOwnProperty(s(e))}},"96cc":function(t,e,i){},"9c4e":function(t,e,i){"use strict";var s=i("96cc"),o=i.n(s);o.a},a006:function(t,e,i){"use strict";var s=i("e907"),o=i.n(s);o.a},a745:function(t,e,i){t.exports=i("f410")},b0dc:function(t,e,i){var s=i("e4ae");t.exports=function(t,e,i,o){try{return o?e(s(i)[0],i[1]):e(i)}catch(r){var n=t["return"];throw void 0!==n&&s(n.call(t)),r}}},b4dd:function(t,e,i){"use strict";var s=i("2cdd"),o=i.n(s);o.a},c8bb:function(t,e,i){t.exports=i("54a1")},cd1c:function(t,e,i){var s=i("e853");t.exports=function(t,e){return new(s(t))(e)}},cd56:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-wrap"},[i("yandex-map"),i("div",{staticClass:"content"},[i("div",[i("filter-block",{directives:[{name:"show",rawName:"v-show",value:t.blocksVisibility.FilterBlock,expression:"blocksVisibility.FilterBlock"}]}),t.blocksVisibility.ObjectBlock?i("object-block"):t._e(),t.blocksVisibility.ObjectsListBlock&&t.objects.length?i("objects-list-block"):t._e(),i("building-types-markers",{directives:[{name:"show",rawName:"v-show",value:"Invest"===t.currentCategorySlug,expression:"currentCategorySlug === 'Invest'"}]}),t.blocksVisibility.ObjectFullInfo?i("object-full-info"):t._e()],1)])],1)},o=[],n=i("854a"),r=i.n(n),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"map"}})},c=[],l=(i("7514"),i("ac6a"),i("456d"),i("1157")),u=i.n(l),d={name:"YandexMap",data:function(){return{map:null,collection:null,flagTemplate:null,iconTemplate:null,currentZoom:15,zoomChangeIconType:11,remInPx:0}},computed:{objects:function(){return this.$store.getters["main/objects"]},objectCoordinatesForShow:function(){return this.$store.state.main.objectCoordinatesForShow},currentObject:function(){return this.$store.state.main.currentObject},isYmapsReady:function(){return this.$store.state.main.isYmapReady.isReady}},mounted:function(){var t=this;this.remInPx=parseFloat(getComputedStyle(document.documentElement).fontSize),this.isYmapsReady?this.init():this.$watch("isYmapsReady",function(e){e&&t.init()})},beforeDestroy:function(){this.collection.removeAll(),this.map.destroy()},watch:{objectCoordinatesForShow:function(t){if(t.length){var e=this.map.getBounds(),i=e[1][1]-e[0][1],s=window.innerWidth,o=i/s,n=.8*s-.5*s,r=n*o,a=JSON.parse(JSON.stringify(t));a[1]-=r,this.map.setCenter(a,this.currentZoom,{duration:500}),this.$store.commit("main/showObjectAtMap",[]),this.$store.commit("main/toggleBlocksVisibility",{block:"FilterBlock",visible:!1})}},currentObject:function(t,e){var i=this;Object.keys(e).length&&this.collection.each(function(t){var s=t.properties.get("object");if(t&&s.id===e.id){var o=i.getDomElement(t);o&&u()(o).find(".row").removeClass("activePlacemark")}}),Object.keys(t).length&&this.collection.each(function(e){var s=e.properties.get("object");if(s.id===t.id){var o=i.getDomElement(e);return u()(o).find(".row").addClass("activePlacemark"),!1}return!0})}},methods:{init:function(){var t=this;this.flagTemplate=ymaps.templateLayoutFactory.createClass('<div class="map-icon">\n            <div>\n                {% if properties.object.type === \'ZU\' %}\n                  <div class="row mb-0 text-center bg-flag$[properties.isActive]" style="height: 2.5rem;">\n                      <div class="col-12">$[properties.object.groundS]</div>\n                      <div class="col-12 small">$[properties.object.areaS]</div>\n                  </div>\n                  <div></div>\n                {% elseif properties.object.type === \'Invest\' %}\n                  <div class="row mb-0 text-center bg-{{ properties.object.buildingType.bg }} p-35$[properties.isActive]">\n                      <div class="col-12 text-uppercase p-0">$[properties.object.buildingName]</div>\n                  </div>\n                  <div></div>\n                {% endif %}\n            </div>\n        </div>'),this.iconTemplate=ymaps.templateLayoutFactory.createClass('<i class="fa fa-map-marker text-{{ properties.color }}" style="font-size: 52px;">\n        </i>'),this.map=new ymaps.Map("map",{center:[55.76141,37.629708],zoom:this.currentZoom,controls:["typeSelector","zoomControl"]}),this.collection=new ymaps.GeoObjectCollection({}),this.map.geoObjects.add(this.collection),this.watchForZoomChange(),this.putObjects(),this.$watch("objects",function(){t.collection.removeAll(),t.putObjects()})},watchForZoomChange:function(){var t=this;this.map.events.add("boundschange",function(e){var i=e.get("newZoom"),s=e.get("oldZoom");if(i!==s){if(t.currentZoom=i,t.currentZoom<=t.zoomChangeIconType&&s<=t.zoomChangeIconType)return;if(t.currentZoom>t.zoomChangeIconType&&s>t.zoomChangeIconType)return;t.collection.removeAll(),t.putObjects()}})},hoverPlacemark:function(t){var e=t.get("type"),i=t.get("target"),s=this.getDomElement(i),o=u()(s).find(".row");"mouseenter"===e?u()(o).addClass("hoverPlacemark"):"mouseleave"===e?u()(o).removeClass("hoverPlacemark"):"click"===e&&(this.$store.commit("main/changeCurrentObject",i.properties.get("object")),this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectBlock",visible:!0}))},getDomElement:function(t){var e=t.getOverlaySync();if(!e)return null;var i=e.getLayoutSync();return i.getElement()},putObjects:function(){var t=this;this.objects.forEach(function(e){e.coordinates?t.addPlacemark(e):t.getCoordinates(e.address)})},addPlacemark:function(t){var e=this,i=this.currentZoom>11?this.getFlagPlacemark(t):this.getIconPlacemark(t);this.collection.add(i),i.events.add(["mouseenter","mouseleave","click"],function(t){return e.hoverPlacemark(t)})},getFlagPlacemark:function(t){var e="ZU"===t.type?[[0,0],[87,Math.round(2.5*this.remInPx)]]:[[0,0],[87,Math.round(1.5*this.remInPx)]],i="ZU"===t.type?[0,-1*(Math.round(4*this.remInPx)+2)]:[0,-1*(Math.round(3*this.remInPx)+2)],s=new ymaps.Placemark(t.coordinates,{object:t,hintContent:t.address,isActive:t.id===this.currentObject.id?" activePlacemark":""},{iconLayout:this.flagTemplate,iconShape:{type:"Rectangle",coordinates:e},iconOffset:i,cursor:"pointer"});return s},getIconPlacemark:function(t){var e=new ymaps.Placemark(t.coordinates,{object:t,hintContent:t.address,isActive:t.id===this.currentObject.id?" activePlacemark":""},{preset:"ZU"===t.type?"islands#nightDotIcon":"islands#".concat(t.buildingType.icon),cursor:"pointer"});return e},getCoordinates:function(t){}}},b=d,f=(i("3fc7"),i("2877")),p=Object(f["a"])(b,a,c,!1,null,null,null),m=p.exports,v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"filterblock",staticClass:"filter-block text-left"},[i("div",{staticClass:"row ml-0 mr-0 pb-1"},[i("div",{staticClass:"col"},[i("div",{staticClass:"form-group"},t._l(t.filters,function(e,s){return i("div",{key:s},[i("label",{staticClass:"control-label mt-3 mb-0"},[i("span",{staticClass:"text-uppercase"},[t._v(t._s(e.label))])]),"checkbox"==e.type?i("div",t._l(e.values,function(o){return i("div",{key:o.id,staticClass:"custom-control custom-checkbox"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"filter.value"}],staticClass:"custom-control-input",attrs:{type:"checkbox",id:s+o.id},domProps:{value:o.slug,checked:Array.isArray(e.value)?t._i(e.value,o.slug)>-1:e.value},on:{change:function(i){var s=e.value,n=i.target,r=!!n.checked;if(Array.isArray(s)){var a=o.slug,c=t._i(s,a);n.checked?c<0&&t.$set(e,"value",s.concat([a])):c>-1&&t.$set(e,"value",s.slice(0,c).concat(s.slice(c+1)))}else t.$set(e,"value",r)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:s+o.id}},[t._v(t._s(o.title))])])}),0):"interval"==e.type?i("div",[i("form",[i("div",{staticClass:"row no-gutters"},[t._m(0,!0),i("div",{staticClass:"col"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.values.from,expression:"filter.values.from"}],staticClass:"form-control form-control-sm bg-transparent text-white p-0 text-right rounded-0 pr-1 pl-1",attrs:{type:"text",size:"5"},domProps:{value:e.values.from},on:{input:function(i){i.target.composing||t.$set(e.values,"from",i.target.value)}}})]),t._m(1,!0),i("div",{staticClass:"col"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.values.to,expression:"filter.values.to"}],staticClass:"form-control form-control-sm bg-transparent text-white p-0 text-right rounded-0 pl-1",attrs:{type:"text"},domProps:{value:e.values.to},on:{input:function(i){i.target.composing||t.$set(e.values,"to",i.target.value)}}})]),i("div",{staticClass:"col col-auto my-label-bottom"},["cost"!==s?i("label",{staticClass:"control-label ml-1 mb-0",domProps:{innerHTML:t._s(e.unit)}}):i("select",{directives:[{name:"model",rawName:"v-model",value:t.currency,expression:"currency"}],staticClass:"custom-select d-inline-block text-secondary border-white ml-1 rounded-0",on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.currency=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"rouble"}},[t._v("₽")]),i("option",{attrs:{value:"dollar"}},[t._v("$")]),i("option",{attrs:{value:"euro"}},[t._v("€")])])])])])]):"radio"==e.type?i("div",t._l(e.values,function(o){return i("div",{key:o.id,staticClass:"custom-control custom-radio"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"filter.value"}],staticClass:"custom-control-input",attrs:{type:"radio",id:s+o.id},domProps:{value:o.slug,checked:t._q(e.value,o.slug)},on:{change:function(i){return t.$set(e,"value",o.slug)}}}),i("label",{staticClass:"custom-control-label",attrs:{for:s+o.id}},[t._v(t._s(o.title))])])}),0):t._e()])}),0)])]),i("button",{staticClass:"btn btn-block btn-primary text-uppercase rounded-0 btn-lg justify-content-center",on:{click:t.applyFilter}},[t._v("Применить")])])},h=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col col-auto my-label-bottom"},[i("label",{staticClass:"control-label mb-0"},[t._v("от")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col col-auto my-label-bottom"},[i("label",{staticClass:"control-label mb-0"},[t._v("до")])])}],g=(i("a481"),i("7f7f"),i("c988")),y={ZUType:{type:"checkbox",label:"Тип",values:[{id:0,title:"Земельные участки (ЗУ)",slug:"ЗУ",checked:!1},{id:1,title:"ОКС под реконструкцию",slug:"ОКС",checked:!1}],value:[]},location:{type:"checkbox",label:"Расположение",values:[{id:0,title:"Москва",slug:"Moscow",checked:!1},{id:1,title:"Новая Москва",slug:"New_Moscow",checked:!1},{id:2,title:"Московская область (МО)",slug:"MO",checked:!1}],value:[]},groundS:{type:"interval",label:"Площадь ЗУ",unit:"Га",values:{from:"",to:""}},areaS:{type:"interval",label:"Площадь ОКС",unit:"м<sup>2</sup>",values:{from:"",to:""}},cost:{type:"interval",label:"Стоимость",unit:"&#8381;",values:{from:"",to:""}},purpose:{type:"radio",label:"Назначение",values:[{id:0,title:"Не важно",slug:"any"},{id:1,title:"Жилое",slug:"Жилое"},{id:2,title:"Апартаменты",slug:"Апартаменты"},{id:3,title:"Нежилое",slug:"Нежилое"}],value:"any"},groundPlan:{type:"radio",label:"Наличие ГПЗУ",values:[{id:0,title:"Не важно",slug:"any"},{id:1,title:"Есть",slug:!0},{id:2,title:"Нет",slug:!1}],value:"any"}},j={name:"FilterBlock",data:function(){return{filters:JSON.parse(JSON.stringify(y)),currency:"rouble",toastr:g["a"]}},computed:{filterWidth:function(){return this.$store.state.filterWidth},objects:function(){return this.$store.getters["main/objects"]},filtersOn:function(){return this.$store.state.main.filtersOn},currentCategorySlug:function(){return this.$store.state.currentCategorySlug}},mounted:function(){this.$refs.filterblock.style.width="".concat(this.filterWidth,"px");var t=this.$store.state.main.filters;t&&Object.keys(t).length&&(this.filters=JSON.parse(JSON.stringify(t)))},watch:{filterWidth:function(t){this.$refs.filterblock.style.width="".concat(t,"px")},objects:function(t){this.filtersOn&&!t.length&&this.toastr.info("Объекты по заданным условиям не найдены")},currentCategorySlug:function(){this.$store.commit("main/toggleBlocksVisibility",{block:"FilterBlock",visible:!1})}},methods:{applyFilter:function(){var t=JSON.parse(JSON.stringify(this.filters));Object.keys(t).forEach(function(e){var i=t[e];if("interval"===i.type){var s=parseFloat(t[e].values.from.replace(",",".")),o=parseFloat(t[e].values.to.replace(",","."));t[e].values.from=s,t[e].values.to=o}}),this.$store.commit("main/switchFavoritesState"),this.$store.commit("main/applyFilter",t),this.$store.commit("main/toggleBlocksVisibility",{block:"FilterBlock",visible:!1})}}},C=j,_=(i("b4dd"),Object(f["a"])(C,v,h,!1,null,null,null)),k=_.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"objectblock",staticClass:"object-block"},[i("div",{staticClass:"row ml-0 mr-0 pb-3"},[i("div",{staticClass:"col"},[i("p",{staticClass:"pt-3 pb-3"},[i("button",{staticClass:"close",attrs:{type:"button"},on:{click:t.closeObjectBlock}},[i("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),i("span",{staticClass:"position-relative d-inline-block"},[i("img",{staticClass:"img-fluid",attrs:{src:t.imageFolders.big+t.object.images[0].filename,alt:"Фото"}}),"ZU"===t.object.type?i("span",{staticClass:"bg-primary text-white pr-3 pl-3 pt-1 pb-1 image-type"},[i("big",[t._v(t._s(t.object.images[0].caption))])],1):"Invest"===t.object.type?i("span",{staticClass:"bg-danger text-white pr-3 pl-3 pt-1 pb-1 building-name-bottom text-uppercase"},[i("big",[t._v(t._s(t.object.buildingName))])],1):t._e()]),i("p",{staticClass:"mt-3 mb-2"},[t._v("\n                Лот\n                "+t._s(t.object.id)+"\n                "),i("favourite-icon",{staticClass:"float-right",attrs:{"object-id":t.object.id}})],1),"Invest"===t.object.type?i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.buildingType.full))]):t._e(),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.district))]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.address))]),"ZU"===t.object.type?i("div",{staticClass:"row mt-4"},[i("div",{staticClass:"col border-right"},[i("p",{staticClass:"mb-2"},[t._v("Земельный участок")]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.kadastrNumberZU))]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.groundS))]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.purposeZU))]),t.object.groundPlan?i("p",{staticClass:"mb-0"},[t._v("ГПЗУ")]):t._e()]),i("div",{staticClass:"col"},[i("p",{staticClass:"mb-2"},[t._v("ОКС")]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.kadastrNumberOKS))]),i("p",{staticClass:"mb-2",domProps:{innerHTML:t._s(t.object.areaS)}}),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.purposeOKS))])])]):t._e(),"Invest"===t.object.type?[i("p",{staticClass:"mb-2",domProps:{innerHTML:t._s(t.object.areaS)}}),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.groundS))]),i("p",{staticClass:"mb-2"},[t._v("\n                    "+t._s(t.object.GAP)+"\n                    "),i("strong",[t._v("Р")])]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.caprate+"%"))])]:t._e(),i("p",{staticClass:"mt-4 mb-3 text-white"},[t.objectInfoVisibility[t.object.id].showPrice?i("big",[t._v("\n                    "+t._s(t.object.cost)+"\n                    "),i("strong",[t._v("Р")])]):t.objectInfoVisibility[t.object.id].priceMessage?i("span",{staticClass:"text-dark"},[t._v("\n                  "+t._s(t.objectInfoVisibility[t.object.id].priceMessage)+"\n                ")]):t._e()],1)],2)]),i("button",{staticClass:"btn btn-block btn-primary text-uppercase rounded-0 btn-lg justify-content-center",attrs:{title:t.objectInfoVisibility[t.object.id].title},on:{click:t.showObjectFullInfo}},[t.objectInfoVisibility[t.object.id].lock?i("i",{staticClass:"fa fa-lock mr-2"}):t._e(),t._v("\n      Подробнее\n    ")])])},O=[],S=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("i",{staticClass:"fa text-danger",class:[t.isFavouriteIcon],on:{click:function(e){return e.stopPropagation(),t.toggleFavourite(e)}}})},x=[],I=(i("6762"),i("2fdb"),i("25be")),F={name:"FavouriteIcon",props:["objectId"],data:function(){return{disabled:!1}},computed:{favourites:function(){return this.$store.state.main.favourites},isFavourite:function(){return this.favourites.includes(this.objectId)},isFavouriteIcon:function(){return this.isFavourite?"fa-heart":"fa-heart-o"},isAuthorized:function(){return this.$store.state.isAuthorized}},methods:{toggleFavourite:function(){this.isAuthorized?this.authFavorite():this.dispatchFavourite()},authFavorite:function(){var t=this;if(!this.disabled){this.disabled=!0;var e={method:"post",url:"/favourites/".concat(this.objectId)};this.isFavourite&&(e.url+="?_method=DELETE"),I["b"].request(e).then(function(){t.dispatchFavourite()}).catch(function(){g["a"].warning("Что пошло не так, попробуйте позднее")}).finally(function(){t.disabled=!1})}},dispatchFavourite:function(){this.$store.dispatch("main/toggleObjectFavourite",{id:this.objectId,value:!this.isFavourite})}}},$=F,P=Object(f["a"])($,S,x,!1,null,null,null),T=P.exports,A={name:"ObjectBlock",components:{FavouriteIcon:T},computed:{objectBlockWidth:function(){return this.$store.state.objectBlockWidth},object:function(){return this.$store.state.main.currentObject},currentCategorySlug:function(){return this.$store.state.currentCategorySlug},imageFolders:function(){return this.$store.state.imageFolders},objectInfoVisibility:function(){return this.$store.getters["main/objectInfoVisibility"]}},mounted:function(){this.$refs.objectblock.style.width="".concat(this.objectBlockWidth,"px")},watch:{objectBlockWidth:function(t){this.$refs.objectblock.style.width="".concat(t,"px")},currentCategorySlug:function(){this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectBlock",visible:!1})}},methods:{closeObjectBlock:function(){this.$store.commit("main/changeCurrentObject",{}),this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectBlock",visible:!1})},showObjectFullInfo:function(){this.objectInfoVisibility[this.object.id].fullInfo?this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectFullInfo",visible:!0}):g["a"].info(this.objectInfoVisibility[this.object.id].title)}}},V=A,B=(i("9c4e"),Object(f["a"])(V,w,O,!1,null,null,null)),N=B.exports,Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"objectsListBlock",staticClass:"objects-list-block shadow",style:{maxWidth:"60%"}},[i("div",{staticClass:"row m-0 pb-0"},[i("div",{staticClass:"col p-0 pb-1"},[i("table",{staticClass:"table table-hover m-0 sticky-thead"},[i("thead",[i("tr",[i("th",{class:[t.sort.buildingName?"sort-"+t.sort.buildingName:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("buildingName")}}},[t._v(t._s("ZU"===t.currentCategorySlug?"":"Название"))]),i("th",{class:[t.sort.id?"sort-"+t.sort.id:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("id")}}},[t._v("Лот")]),i("th",{class:[t.sort.district?"sort-"+t.sort.district:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("district")}}},[t._v("Субъект")]),i("th",{class:[t.sort.address?"sort-"+t.sort.address:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("address")}}},[t._v("Адрес")]),"ZU"===t.currentCategorySlug?[i("th",{class:[t.sort.ZUType?"sort-"+t.sort.ZUType:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("ZUType")}}},[t._v("Тип")]),i("th",{class:[t.sort.groundS?"sort-"+t.sort.groundS:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("groundS")}}},[t._v("S ЗУ")]),i("th",{class:[t.sort.areaS?"sort-"+t.sort.areaS:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("areaS")}}},[t._v("S ОКС")]),i("th",{class:[t.sort.purpose?"sort-"+t.sort.purpose:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("purpose")}}},[t._v("Назначение")]),i("th",{class:[t.sort.groundPlan?"sort-"+t.sort.groundPlan:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("groundPlan")}}},[t._v("ГПЗУ")])]:t._e(),"Invest"===t.currentCategorySlug?[i("th",{class:[t.sort.type?"sort-"+t.sort.type:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("type")}}},[t._v("Тип")]),i("th",{class:[t.sort.areaS?"sort-"+t.sort.areaS:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("areaS")}}},[t._v("S")]),i("th",{class:[t.sort.GAP?"sort-"+t.sort.GAP:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("GAP")}}},[t._v("ГАП, Р.")]),i("th",{class:[t.sort.caprate?"sort-"+t.sort.caprate:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("caprate")}}},[t._v("Caprate")])]:t._e(),i("th",{staticClass:"text-right",class:[t.sort.cost?"sort-"+t.sort.cost:null],attrs:{scope:"col"},on:{click:function(e){return t.sortTo("cost")}}},[t._v("Стоимость, Р.")])],2)]),i("tbody",t._l(t.objects,function(e){return i("tr",{key:e.id,staticClass:"bg-white",attrs:{title:t.objectInfoVisibility[e.id].title},on:{click:function(i){return t.showObjectFullInfo(e)}}},[i("td",{attrs:{width:"25%"}},[i("span",{staticClass:"position-relative d-inline-block"},[i("img",{staticClass:"img-fluid",attrs:{src:t.imageFolders.small+e.images[0].filename,alt:"Фото"}}),"ZU"===t.currentCategorySlug?i("span",{staticClass:"bg-primary text-white pr-2 pl-2 pt-1 pb-1 image-type"},[i("small",[t._v(t._s(e.images[0].caption))])]):"Invest"===t.currentCategorySlug?i("span",{staticClass:"bg-danger text-white pr-2 pl-2 pt-1 pb-1 building-name text-uppercase"},[i("small",[t._v(t._s(e.buildingName))])]):t._e()])]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.id))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.district))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.address))]),"ZU"===t.currentCategorySlug?[i("td",{staticClass:"align-middle text-nowrap"},[t._v(t._s(e.ZUType))]),i("td",{staticClass:"align-middle text-nowrap"},[t._v(t._s(e.groundS))]),i("td",{staticClass:"align-middle text-nowrap",domProps:{innerHTML:t._s(e.areaS)}}),i("td",{staticClass:"align-middle"},[t._v("\n                "+t._s("ЗУ"===e.ZUType?e.purposeZU:e.purposeOKS)+"\n              ")]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.groundPlan?"Есть":"Нет"))])]:t._e(),"Invest"===t.currentCategorySlug?[i("td",{staticClass:"align-middle"},[t._v(t._s(e.buildingType.short))]),i("td",{staticClass:"align-middle text-nowrap",domProps:{innerHTML:t._s(e.areaS)}}),i("td",{staticClass:"align-middle text-nowrap"},[t._v(t._s(e.GAP))]),i("td",{staticClass:"align-middle"},[t._v(t._s(e.caprate+"%"))])]:t._e(),i("td",{staticClass:"text-right align-middle position-relative text-nowrap"},[t.objectInfoVisibility[e.id].showPrice?i("span",[t._v(t._s(e.cost))]):t._e(),i("favourite-icon",{attrs:{"object-id":e.id}}),i("a",{staticClass:"showInMap",attrs:{href:""},on:{click:function(i){return i.stopPropagation(),i.preventDefault(),t.showObjectAtMap(e)}}},[t._v("на карте")])],1)],2)}),0)])])]),i("transition",{attrs:{name:"bounce"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"download-list"},[i("button",{staticClass:"btn btn-primary rounded-0 shadow border border-left-0",attrs:{disabled:t.disabled.downloadPdf,type:"button"},on:{click:t.checkForPdf}},[t._v("\n        Скачать список\n      ")])])])],1)},E=[],M=i("bd86"),U=(i("6b54"),i("55dd"),i("a745")),z=i.n(U);function D(t){if(z()(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}var L=i("774e"),J=i.n(L),W=i("c8bb"),K=i.n(W);function R(t){if(K()(Object(t))||"[object Arguments]"===Object.prototype.toString.call(t))return J()(t)}function G(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function H(t){return D(t)||R(t)||G()}var Y={name:"ObjectsListBlock",components:{FavouriteIcon:T},data:function(){return{show:!1,disabled:{downloadPdf:!1},sort:{id:"down"},numericFields:["id","areaS","cost","groundS","GAP","caprate"]}},computed:{objects:function(){var t=this,e=H(this.$store.getters["main/objects"]),i=Object.keys(this.sort);if(!i.length)return e;var s=i[0],o=this.sort[s],n=this.numericFields.includes(s);return e.sort(function(e,i){var r,a;if("purpose"===s&&(r="ЗУ"===e.ZUType?e.purposeZU:e.purposeOKS,a="ЗУ"===i.ZUType?i.purposeZU:i.purposeOKS),"type"===s&&"Invest"===t.currentCategorySlug?(r=e.buildingType.short,a=i.buildingType.short):(r=n?parseFloat(e[s].toString().replace(/\s/g,"")):e[s],a=n?parseFloat(i[s].toString().replace(/\s/g,"")):i[s]),"down"===o){var c=[a,r];r=c[0],a=c[1]}return r>a?-1:r<a?1:0})},filterWidth:function(){return this.$store.state.filterWidth},currentCategorySlug:function(){return this.$store.state.currentCategorySlug},imageFolders:function(){return this.$store.state.imageFolders},objectInfoVisibility:function(){return this.$store.getters["main/objectInfoVisibility"]}},mounted:function(){this.show=!0},watch:{currentCategorySlug:function(){this.sort={}}},methods:{showObjectFullInfo:function(t){this.objectInfoVisibility[t.id].fullInfo?(this.$store.commit("main/changeCurrentObject",t),this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectFullInfo",visible:!0})):g["a"].info(this.objectInfoVisibility[t.id].title)},showObjectAtMap:function(t){this.$store.commit("main/changeCurrentObject",t),this.$store.commit("main/showObjectAtMap",t.coordinates)},checkForPdf:function(){var t=this;this.disabled.downloadPdf=!0,I["b"].post("/pdf/list/check",{objects:this.objects,currentCategorySlug:this.currentCategorySlug,check:!0}).then(function(){t.downloadPdf()}).catch(function(){g["a"].warning("Что-то пошло не так, попробуйте перегрузить страницу")}).finally(function(){t.disabled.downloadPdf=!1})},downloadPdf:function(){g["a"].info("Идет подготовка файла для скачивания");var t=document.createElement("form");t.method="POST",t.action="/pdf/list";var e=document.createElement("input");e.name="objects",e.value=JSON.stringify(this.objects);var i=document.createElement("input");i.name="_token",i.value=document.head.querySelector("meta[name=csrf-token]").getAttribute("content");var s=document.createElement("input");s.name="currentCategorySlug",s.value=this.currentCategorySlug,t.appendChild(e),t.appendChild(i),t.appendChild(s),document.body.appendChild(t),t.submit()},sortTo:function(t){if("buildingName"!==t||"ZU"!==this.currentCategorySlug){var e=t in this.sort&&"down"===this.sort[t]?"up":"down";this.sort=Object(M["a"])({},t,e)}}}},q=Y,X=(i("938a"),Object(f["a"])(q,Z,E,!1,null,null,null)),Q=X.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"building-types-marker"},[i("div",{staticClass:"row d-inline-flex no-gutters pl-1 pr-0 pb-2 pt-2"},t._l(t.allBuildingTypes,function(e,s){return i("div",{key:s,staticClass:"col pr-1"},[i("span",{staticClass:"text-white pr-2 pl-2 pt-1 pb-1 text-uppercase",class:["bg-"+e.bg]},[t._v(t._s(e.short))])])}),0)])},et=[],it={name:"BuildingTypesMarkers",computed:{allBuildingTypes:function(){return this.$store.state.buildingTypes}}},st=it,ot=(i("255d"),Object(f["a"])(st,tt,et,!1,null,null,null)),nt=ot.exports,rt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"object-full-info bg-white shadow",style:{maxWidth:"60%"}},[i("div",{staticClass:"row p-3 m-0 bg-white"},[i("div",{staticClass:"col"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col d-flex flex-column"},[i("carousel",{attrs:{images:t.object.images,path:t.imageFolders.big}})],1),i("div",{staticClass:"col"},[i("div",{staticClass:"row h-100"},[i("div",{staticClass:"col col-12"},[i("p",{staticClass:"mt-1 mb-2"},[t._v("\n                Лот\n                "+t._s(t.object.id)+"\n                "),i("span",{staticClass:"buttons"},[i("favourite-icon",{staticClass:"mr-2",attrs:{"object-id":t.object.id}}),i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.closeObjectFullInfo}},[t._v("X")])],1)]),"Invest"===t.object.type?i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.buildingType.full))]):t._e(),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.district))]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.address))]),"ZU"===t.object.type?i("div",{staticClass:"row mt-4 mb-4"},[i("div",{staticClass:"col border-right"},[i("p",{staticClass:"mb-2"},[t._v("Земельный участок")]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.kadastrNumberZU))]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.groundS))]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.purposeZU))]),t.object.groundPlanOKS?i("p",{staticClass:"mb-2"},[t._v("ГПЗУ")]):t._e()]),i("div",{staticClass:"col ml-3"},[i("p",{staticClass:"mb-2"},[t._v("ОКС")]),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.kadastrNumberOKS))]),i("p",{staticClass:"mb-2",domProps:{innerHTML:t._s(t.object.areaS)}}),i("p",{staticClass:"mb-2"},[t._v(t._s(t.object.purposeOKS))])])]):t._e(),"Invest"===t.object.type?[i("p",{staticClass:"mb-2",domProps:{innerHTML:t._s(t.object.areaS)}}),i("p",{staticClass:"mb-2",domProps:{innerHTML:t._s(t.object.groundS)}}),i("p",{staticClass:"mb-2"},[t._v("\n                  ГАП\n                  "+t._s(t.object.GAP)+"\n                  "),i("strong",[t._v("Р")])]),i("p",{staticClass:"mb-2 mb-4"},[t._v("Caprate "+t._s(t.object.caprate+"%"))])]:t._e()],2),i("div",{staticClass:"col"},[i("div",{staticClass:"row h-100"},[i("div",{staticClass:"col align-self-end pb-2"},[i("p",{staticClass:"mb-0"},[t.objectInfoVisibility[t.object.id].showPrice?i("big",[t._v("\n                      "+t._s(t.object.cost)+"\n                      "),i("strong",[t._v("Р")])]):t.objectInfoVisibility[t.object.id].priceMessage?i("span",{staticClass:"text-dark"},[t._v("\n                      "+t._s(t.objectInfoVisibility[t.object.id].priceMessage)+"\n                    ")]):t._e()],1)]),i("div",{staticClass:"col align-self-end pb-2 text-right"},[i("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.showObjectAtMap(e)}}},[t._v("посмотреть на карте")])])])])])])]),i("hr"),i("div",{staticClass:"row"},[t.objectInfoVisibility[t.object.id].fullInfo&&t.description?i("div",{staticClass:"col",staticStyle:{"white-space":"pre-line"}},[t._v("\n          "+t._s(t.description)+"\n        ")]):t.objectInfoVisibility[t.object.id].fullInfo?i("div",{staticClass:"col text-center mt-5"},[i("div",{staticClass:"spinner-border",attrs:{role:"status"}})]):i("p",{staticClass:"font-italyc"},[t._v(t._s(t.objectInfoVisibility[t.object.id].title))])])])]),i("transition",{attrs:{name:"bounce"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"download"},[i("button",{staticClass:"btn btn-primary rounded-0 text-nowrap download-tizer w-100 mb-1 shadow border border-left-0",attrs:{type:"button",disabled:t.disabled.downloadTizer},on:{click:t.downloadTizer}},[t._v("Скачать тизер")]),t.object.docs&&t.object.docs.length?i("button",{staticClass:"btn btn-secondary rounded-0 text-nowrap download-docs w-100 shadow border border-left-0",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.getdoc(e)}}},[t._v("\n        Документация\n        "),i("i",{staticClass:"fa fa-file-pdf-o d-block mt-3 mb-2"})]):t._e()])])],1)},at=[],ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"carousel slide h-100",attrs:{id:"carouselExampleIndicators","data-ride":"false","data-interval":"false"}},[t.images.length>1?i("ol",{staticClass:"carousel-indicators"},t._l(t.images,function(t,e){return i("li",{key:t.id,ref:"indicator"+e,refInFor:!0,attrs:{"data-target":"#carouselExampleIndicators","data-slide-to":e}})}),0):t._e(),i("div",{staticClass:"carousel-inner h-100"},t._l(t.images,function(e,s){return i("div",{key:e.id,ref:"image"+s,refInFor:!0,staticClass:"carousel-item h-100",style:{backgroundImage:"url("+(t.path+e.filename)+")"}})}),0),t.images.length>1?i("a",{staticClass:"carousel-control-prev",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"prev"}},[i("span",{staticClass:"carousel-control-prev-icon",attrs:{"aria-hidden":"true"}}),i("span",{staticClass:"sr-only"},[t._v("Previous")])]):t._e(),t.images.length>1?i("a",{staticClass:"carousel-control-next",attrs:{href:"#carouselExampleIndicators",role:"button","data-slide":"next"}},[i("span",{staticClass:"carousel-control-next-icon",attrs:{"aria-hidden":"true"}}),i("span",{staticClass:"sr-only"},[t._v("Next")])]):t._e()])},lt=[],ut={name:"Carousel",props:["images","path"],mounted:function(){u()(this.$refs.image0).addClass("active"),u()(this.$refs.indicator0).addClass("active")}},dt=ut,bt=(i("144e"),Object(f["a"])(dt,ct,lt,!1,null,null,null)),ft=bt.exports,pt={name:"ObjectFullInfo",components:{FavouriteIcon:T,Carousel:ft},data:function(){return{descriptionError:!1,unwatch:null,show:!1,disabled:{downloadTizer:!1}}},computed:{object:function(){return this.$store.state.main.currentObject},currentCategorySlug:function(){return this.$store.state.currentCategorySlug},description:function(){return this.$store.state.main.objectsDescriptions[this.object.id]},imageFolders:function(){return this.$store.state.imageFolders},objectInfoVisibility:function(){return this.$store.getters["main/objectInfoVisibility"]}},mounted:function(){this.object.id&&this.objectInfoVisibility[this.object.id].fullInfo&&this.getObjectDescription(),this.show=!0},watch:{currentCategorySlug:function(){this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectFullInfo",visible:!1})},object:function(t){t.id&&this.getObjectDescription()}},methods:{checkForTizer:function(){var t=this;this.disabled.downloadTizer=!0;var e=JSON.parse(JSON.stringify(this.object));e.description=this.description,I["b"].post("/pdf/object/check",{object:e}).then(function(){t.downloadTizer()}).catch(function(){g["a"].warning("Что-то пошло не так, попробуйте перегрузить страницу")}).finally(function(){t.disabled.downloadTizer=!1})},downloadTizer:function(){g["a"].info("Идет подготовка файла для скачивания");var t=document.createElement("form");t.method="POST",t.action="/pdf/object";var e=document.createElement("input");e.name="object";var i=JSON.parse(JSON.stringify(this.object));i.description=this.description,e.value=JSON.stringify(i);var s=document.createElement("input");s.name="_token",s.value=document.head.querySelector("meta[name=csrf-token]").getAttribute("content"),t.appendChild(e),t.appendChild(s),document.body.appendChild(t),t.submit()},closeObjectFullInfo:function(){this.$store.commit("main/changeCurrentObject",{}),this.$store.commit("main/toggleBlocksVisibility",{block:"ObjectFullInfo",visible:!1})},showObjectAtMap:function(){this.$store.commit("main/showObjectAtMap",this.object.coordinates)},getObjectDescription:function(){var t=this;if(!this.description){var e=this.object.id;I["b"].get("/objects/".concat(e)).then(function(i){t.$store.commit("main/addObjectsDescriptions",{id:e,description:i.data})}).catch(function(){t.descriptionError=!0})}},getdoc:function(){var t=this;I["b"].get("/files/checkdocs/".concat(this.object.id)).then(function(){window.location.href="/files/getdoc/".concat(t.object.id)}).catch(function(){g["a"].warning("Документация не найдена, возможно она была уже удалена")})}}},mt=pt,vt=(i("6293"),Object(f["a"])(mt,rt,at,!1,null,null,null)),ht=vt.exports,gt=i("2b0e"),yt={namespaced:!0,state:{blocksVisibility:{ObjectsListBlock:!1,ObjectBlock:!1,ObjectFullInfo:!1,FilterBlock:!1},foundedObject:{},favourites:[],favouritesOn:!1,currentObject:{},filters:{},filtersOn:!1,objectCoordinatesForShow:[],objectsDescriptions:{},isYmapReady:window.ymapsState},mutations:{getAllInitData:function(t,e){if(e)I["b"].get("/favourites").then(function(e){t.favourites=e.data});else{var i=localStorage.getItem("favourites");t.favourites=i?JSON.parse(i):[]}},toggleBlocksVisibility:function(t,e){var i=e.block,s=e.visible;"FilterBlock"!==i&&s?Object.keys(t.blocksVisibility).forEach(function(e){"FilterBlock"!==e&&(t.blocksVisibility[e]=e===i&&s)}):t.blocksVisibility[i]="reverse"===s?!t.blocksVisibility[i]:s},gotSearchResult:function(t,e){t.foundedObject=null,t.foundedObject=e},toggleObjectFavourite:function(t,e){var i=e.id,s=e.value,o=e.isAuthorized,n=t.favourites.indexOf(i);if(s&&n<0?t.favourites.push(i):!s&&n>=0&&t.favourites.splice(n,1),!o){var r=localStorage.getItem("favourites"),a=r?JSON.parse(r):[],c=a.indexOf(i);s&&c<0?(a.push(i),localStorage.setItem("favourites",JSON.stringify(a))):!s&&c>=0&&(a.splice(c,1),localStorage.setItem("favourites",JSON.stringify(a)))}},switchFavoritesState:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"reverse";t.favouritesOn="reverse"===e?!t.favouritesOn:e,t.favouritesOn&&(t.filtersOn=!1)},changeCurrentObject:function(t,e){t.currentObject=e},applyFilter:function(t,e){t.filters=Object.assign({},e),t.favouritesOn=!1,t.filtersOn=!0},filterReset:function(t){t.filtersOn=!1},showObjectAtMap:function(t,e){t.objectCoordinatesForShow=e},addObjectsDescriptions:function(t,e){var i=e.id,s=e.description;gt["a"].set(t.objectsDescriptions,i,s)}},getters:{activeItems:function(t){return{filter:t.blocksVisibility.FilterBlock,objectsList:t.blocksVisibility.ObjectsListBlock,map:!t.blocksVisibility.ObjectsListBlock}},objects:function(t,e,i,s){if(t.favouritesOn)return s.objectsForCurrentCategory.filter(function(e){return!!t.favourites.includes(e.id)});if(t.filtersOn){var o=[];return i.objectsPre.forEach(function(e){var i="ЗУ"===e.ZUType?"ZU":"OKS",s=Object.keys(t.filters).every(function(s){var o=t.filters[s];if("checkbox"===o.type){if(o.value.length&&o.value.length!==o.values.length&&!o.value.includes(e[s]))return!1}else if("radio"===o.type&&"any"!==o.value){if("purpose"===s){if(o.value!==e[s+i])return!1}else if(o.value!==e[s])return!1}else if("interval"===o.type){if(o.values.from&&e[s]<o.values.from)return!1;if(o.values.to&&e[s]>o.values.to)return!1}return!0});s&&o.push(e.id)}),s.objectsForCurrentCategory.filter(function(t){return o.includes(t.id)})}return s.objectsForCurrentCategory},objectInfoVisibility:function(t,e,i,s){var o=i.isAuthorized,n=i.user,r=n.role,a=n.accepted,c={};return s.objects.forEach(function(t){var e=null,i=!1,s=!0,n=!0,l=null;o?a?t.price_admins_only&&!["admin","manager"].includes(r)&&(s=!1,l="Информация о цене объекта закрыта"):((t.price_admins_only||t.only_auth)&&(e="Информация недоступна, т.к. ваш аккаунт еще не прошел проверку",s=!1,i=!0),t.only_auth&&(n=!1)):((t.price_admins_only||t.only_auth)&&(e="Авторизуйтесь, чтобы видеть больше информации",s=!1),t.only_auth&&(n=!1)),c[t.id]={title:e,lock:i,showPrice:s,fullInfo:n,priceMessage:l}}),c}},actions:{getAllInitData:function(t){t.commit("getAllInitData",t.rootState.isAuthorized)},toggleObjectFavourite:function(t,e){var i=e.id,s=e.value,o=t.rootState.isAuthorized;t.commit("toggleObjectFavourite",{id:i,value:s,isAuthorized:o})}}},jt={components:{YandexMap:m,FilterBlock:k,ObjectBlock:N,ObjectsListBlock:Q,BuildingTypesMarkers:nt,ObjectFullInfo:ht},data:function(){return{toastr:r.a}},computed:{currentCategorySlug:function(){return this.$store.state.currentCategorySlug},blocksVisibility:function(){return this.$store.state.main.blocksVisibility},objects:function(){return this.$store.getters["main/objects"]},favouritesOn:function(){return this.$store.state.main.favouritesOn}},watch:{objects:function(t){this.favouritesOn&&!t.length&&this.toastr.info("У вас нет избранных объектов")}},beforeCreate:function(){this.$store.dispatch("getAllInitData"),this.$store.registerModule("main",yt),this.$store.dispatch("main/getAllInitData")},beforeDestroy:function(){this.$store.unregisterModule("main")}},Ct=jt,_t=(i("a006"),Object(f["a"])(Ct,s,o,!1,null,null,null));e["default"]=_t.exports},cfcd:function(t,e,i){},d2d5:function(t,e,i){i("1654"),i("549b"),t.exports=i("584a").Array.from},e853:function(t,e,i){var s=i("d3f4"),o=i("1169"),n=i("2b4c")("species");t.exports=function(t){var e;return o(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!o(e.prototype)||(e=void 0),s(e)&&(e=e[n],null===e&&(e=void 0))),void 0===e?Array:e}},e907:function(t,e,i){},f410:function(t,e,i){i("1af6"),t.exports=i("584a").Array.isArray}}]);