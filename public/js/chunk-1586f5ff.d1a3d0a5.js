(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1586f5ff"],{b961:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"mt-5",style:{paddingLeft:t.objectBlockWidth+"px"}},[e("h5",{staticClass:"text-primary mb-5"},[t._v("Личный кабинет пользователя")]),e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col col-auto"},[e("p",[t._v(t._s(t.user.name))]),e("p",[t._v(t._s(t.user.email))]),e("p",[t._v(t._s(t.roles[t.user.role]?t.roles[t.user.role]:"−"))]),t.last_login?e("p",[t._v(t._s(t.last_login))]):e("p",[t._v("−")]),e("p",[t._v("0")]),e("div",{staticClass:"form-group"},[e("div",{staticClass:"custom-control custom-checkbox"},[e("input",{staticClass:"custom-control-input",attrs:{type:"checkbox",id:"subscribed",disabled:t.disabled},domProps:{checked:t.user.subscribed},on:{click:function(s){return s.preventDefault(),t.changeSubscriptionStatus(s)}}}),e("label",{staticClass:"custom-control-label",attrs:{for:"subscribed"}})])])])]),t.infoMessages&&t.infoMessages.verificationLinkExpired?e("div",{staticClass:"mt-4 font-italic text-secondary"},[e("p",[t._v("Срок действия ссылки истек")]),e("p",[e("a",{attrs:{href:""},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.sendEmail(s)}}},[t._v("Нажмите")]),t._v(",\n      чтобы отправить ссылку повторно\n      ")])]):t.user.email_verified_at?t.user.accepted?e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col col-auto"},[t.hasCatalogAccess?e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col"},[e("router-link",{staticClass:"btn btn-primary btn-block",attrs:{to:{name:"lk-object",params:{id:"new"}}}},[t._v("Разместить новый объект")])],1)]):t._e(),t.hasCatalogAccess?e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col"},[e("router-link",{staticClass:"btn btn-secondary btn-block",attrs:{to:{name:"lk-objects"}}},[t._v("Управление каталогом")])],1)]):t._e(),"admin"===t.user.role?e("div",{staticClass:"row mb-2"},[e("div",{staticClass:"col"},[e("router-link",{staticClass:"btn btn-outline-secondary btn-block",attrs:{to:{name:"lk-users"}}},[t._v("Пользователи")])],1)]):t._e()])]):e("p",{staticClass:"mt-4 font-italic text-secondary"},[t._v("\n      Вы подтвердили свой email, теперь ваш аккаунт должен подтвердить администратор\n  ")]):e("div",{staticClass:"mt-4 font-italic text-secondary"},[e("p",[t._v("Вам необходимо подтвердить свой email")]),e("p",[t._v("\n        Не получили письмо?\n        "),e("a",{attrs:{href:""},on:{click:function(s){return s.stopPropagation(),s.preventDefault(),t.sendEmail(s)}}},[t._v("\n          Отправить еще раз\n        ")])])])])},i=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"col col-auto"},[e("p",[t._v("Пользователь:")]),e("p",[t._v("E-mail:")]),e("p",[t._v("Доступ:")]),e("p",[t._v("Последнее посещение:")]),e("p",[t._v("Новых объектов:")]),e("p",[t._v("Подписка на новые объекты:")])])}],n=(e("6762"),e("2fdb"),e("c1df")),c=e.n(n),o=e("c988"),r=e("25be"),l={name:"LKUserInfo",data:function(){return{disabled:!1,infoMessages:window.infoMessages}},computed:{objectBlockWidth:function(){return this.$store.state.objectBlockWidth},user:function(){return this.$store.state.user},roles:function(){return this.$store.getters["lk/roles"]},last_login:function(){return this.user.last_login?c()(this.user.last_login).format("DD.MM.YYYY"):null},hasCatalogAccess:function(){return["admin","manager"].includes(this.user.role)}},methods:{changeSubscriptionStatus:function(){var t=this;this.disabled=!0;var s=!this.user.subscribed;r["b"].post("/changeSubscriptionStatus",{status:s}).then(function(){t.$store.commit("changeSubscriptionStatus",s)}).catch(function(){o["a"].warning("Что-то пошло не так, попробуйте позднее")}).finally(function(){t.disabled=!1})},sendEmail:function(){var t=this;this.disabled||(this.disabled=!0,r["b"].get("email/resend").then(function(){o["a"].success("Вам отправлено повторное письмо")}).finally(function(){t.disabled=!1}))}}},u=l,d=(e("d36b"),e("2877")),b=Object(d["a"])(u,a,i,!1,null,"7ecef7a4",null);s["default"]=b.exports},d36b:function(t,s,e){"use strict";var a=e("e72c"),i=e.n(a);i.a},e72c:function(t,s,e){}}]);